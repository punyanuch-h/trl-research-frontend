# คู่มือระบบ i18n (Internationalization)

## โครงสร้างโฟลเดอร์

```
src/
├── locales/           # ไฟล์ภาษา
│   ├── en.json        # ภาษาอังกฤษ
│   └── th.json        # ภาษาไทย
├── lib/
│   └── i18n.ts        # การตั้งค่า i18next
└── components/
    └── LanguageSwitch.tsx  # ปุ่มสลับภาษา
```

## วิธีการใช้งาน

### 1. ใน Component (React)

```tsx
import { useTranslation } from "react-i18next";

function MyComponent() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t("header.appTitle")}</h1>
      <p>{t("common.yes")}</p>
    </div>
  );
}
```

### 2. การใช้กับตัวแปร (Interpolation)

```json
// en.json
{
  "greeting": "Hello, {{name}}!"
}
```

```tsx
{t("greeting", { name: "John" })}
```

### 3. พหูพจน์ (Pluralization)

```json
{
  "itemCount": "{{count}} item",
  "itemCount_plural": "{{count}} items"
}
```

```tsx
{t("itemCount", { count: 5 })}
```

## การเพิ่มภาษาใหม่

### ขั้นตอน

1. **สร้างไฟล์ภาษาใหม่** ใน `src/locales/` เช่น `ja.json` (ญี่ปุ่น)

2. **อัปเดต `src/lib/i18n.ts`**

```ts
// เพิ่ม type
export type Lang = "th" | "en" | "ja";

// เพิ่มใน SUPPORTED_LANGS
export const SUPPORTED_LANGS: Lang[] = ["th", "en", "ja"];

// import และเพิ่ม resources
import ja from "@/locales/ja.json";

const resources = {
  en: { translation: en },
  th: { translation: th },
  ja: { translation: ja },  // เพิ่มบรรทัดนี้
};
```

3. **อัปเดต `LanguageSwitch.tsx`** หากต้องการแสดงภาษาญี่ปุ่นเป็นตัวเลือก

## Best Practices สำหรับ Production

| แนวทาง | คำอธิบาย |
|--------|----------|
| **Namespacing** | แบ่ง key ตาม feature เช่น `header.*`, `auth.*`, `evaluate.*` |
| **Fallback** | ใช้ `fallbackLng` เพื่อแสดงภาษาอื่นเมื่อ key ไม่พบ |
| **Key Convention** | ใช้รูปแบบ `section.subsection.key` เช่น `common.yes` |
| **ห้าม hardcode** | ไม่ใส่ข้อความตรงใน component |
| **Type Safety** | พิจารณาใช้ `i18next-parser` + TypeScript สำหรับ type-safe keys |
| **Lazy Load** | สำหรับหลายภาษา สามารถใช้ `i18next-http-backend` โหลดตามต้องการ |
| **Testing** | ใช้ `i18n.changeLanguage()` ใน unit test |

## การ Deploy

- ไฟล์ภาษา (`en.json`, `th.json`) จะถูก bundle เข้าไปใน JavaScript โดย Vite
- การสลับภาษาทำงานแบบ realtime ไม่ต้อง reload หน้า
- ภาษาที่เลือกจะถูกเก็บใน `localStorage` (key: `app_lang`)
